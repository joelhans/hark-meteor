<head>
  <title>Hark</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700,700italic">

  <link rel="stylesheet" href="/css/mediaelementplayer.css" />

</head>

<body>
  <section id="container">
    <section class="main">
      {{#if currentUser}}
        <section class="left">
          {{> playing}}
          {{> add}}
          {{> subscriptions}}
        </section>
        <section class="right">
          <header> 
            <div class="header-logo">
              <img src="/img/logo.svg" />
            </div>
            {{ loginButtons}}
          </header>
          {{> timeline}}
          {{> playlist}}
        </section>
      {{else}} 
        {{> greeting}}
      {{/if}}
    </section>
  </section>

  {{# if currentUser}}
    {{> notify}}
    {{> player}}
  {{/if}}
</body>

<template name="greeting">
  <div class="home-logo">
    <img src="/img/logo.svg" />
  </div>
  <h1>Hark is your personal radio station.</h1>
</template>

<!---------------------------
-- TEMPLATE/ADD
---------------------------->
<template name="add">
  <section class="add-update">
    <form id="add-podcast-form">
      <input type="text" id="podcast-uri" placeholder="Enter a feed." />
      <button class="add">Add</button>
      <button class="confirm">+</button>
    </form>
    <a id="update" href="#">Update</a>
  </section>
</template>

<!---------------------------
-- TEMPLATE/PLAYING
---------------------------->
<template name="playing">
  <section class="playing">
    <h1>Now playing</h1>
    {{#if current}}
      <ul> 
        <li>{{current.0.playing.title}}</li>
        <li>{{current.0.playing.feed}}</p>
      </ul>
    {{else}}
      <ul>
        <li>Nothing playing. :(</li>
        <li>Don&rsquo;t make Hark sad.</li>
    {{/if}}
  </section>
</template>

<!---------------------------
-- TEMPLATE/SUBSCRIPTIONS
---------------------------->
<template name="subscriptions">
  <ul class="feeds">
    <li><a href="/" class="feed-view">All</a></li>
  {{#each feeds}}
    <li class="feed">
      <a href="/feed/{{_id}}" class="feed-view">{{title}}</a>
      <a href="#" class="feed-destroy">x</a>
    </li>
  {{/each}}
  </ul>
</template>

<!---------------------------
-- TEMPLATE/TIMELINE
---------------------------->
<template name="timeline">
  <ul id="items">
    {{#each items}}
      <li class="item">
        <h1>
          <a href="#" id="{{_id}}" file="{{file.0.url}}" class="item-play">{{title}}</a>
        </h1>
        <div class="meta">
          <span>{{feed}}</span>
          |
          <span class="moment" date="{{date}}" title="published: {{date}}">{{date}}</span>
          |
          {{#if listened}}
          <a href="#" id="{{_id}}" class="item-unlistened">Mark unlistened</a>
          {{else}}
          <a href="#" id="{{_id}}" class="item-listened">Mark listened</a>
          {{/if}}
          |
          <a href="#" class="item-add-playlist">Add to playlist</a>
        </div> 
      </li>
    {{/each}}
  </ul>
</template>

<!---------------------------
-- TEMPLATE/PLAYLIST
---------------------------->

<template name="playlist">
  <section class="playlist">
    <ul>
      <a href="#" class="playlist-clear">Clear</a>
      {{#each list.0.playlist}}
        <li>
          <a href="#" class="playlist-item">{{title}}</a>
          | {{feed}}
          |
          <a href="#" class="playlist-destroy">x</a> 
        </li>
      {{/each}}
  </section>
</template>

<!---------------------------
-- TEMPLATE/NOTIFICATIONS
---------------------------->
<template name="notify">
  <section id="notify" class="notify error-{{showHide}}">
    <p>Errors:</p>
    {{#each messages}}
      <p>{{this.message}}</p>
    {{/each}}
    <p>Click anywhere on this message to dismiss.</p>
  </section>
</template>

<!---------------------------
-- TEMPLATE/PLAYER
---------------------------->

<template name="player">
  <section id="player">
    <video class="player-video" src="http://mediaelementjs.com/media/echo-hereweare.mp4"></video> 
    <audio class="player-audio" src="http://feeds.thisamericanlife.org/~r/talpodcast/~5/o_Vb6IZzdfs/477.mp3"></audio>
  </section>
</template>
